<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Reforge Command Center</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            reforge: {
              orange: '#ED5624',
              'orange-dark': '#C44A1E',
              'orange-light': '#F0802E',
              teal: '#57A499',
              'teal-light': '#A0D5C2',
              mustard: '#CEAA56',
              'mustard-light': '#DDC977',
              black: '#000000',
              cream: '#EAEACF',
              'off-white': '#F2F2F2',
              muted: '#6B7280'
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif']
          }
        }
      }
    }
  </script>
  <style>
    body { font-family: 'Inter', sans-serif; }
    .gradient-bg { background: linear-gradient(180deg, #FAFAFA 0%, #F2F2F2 100%); }
    .card { background: #FFFFFF; border: 1px solid #E5E7EB; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .card:hover { border-color: #ED5624; box-shadow: 0 4px 12px rgba(237,86,36,0.1); }
    .nav-link { transition: all 0.2s; color: #374151; }
    .nav-link:hover { background: rgba(237,86,36,0.05); color: #ED5624; }
    .nav-link.active { background: rgba(237,86,36,0.1); border-left: 3px solid #ED5624; color: #ED5624; }
    .btn-primary { background: #ED5624; color: white; }
    .btn-primary:hover { background: #C44A1E; }
    .btn-secondary { background: #57A499; color: white; }
    .btn-secondary:hover { background: #4A8F85; }
    
    /* Swiper Card Styles */
    .swipe-card {
      position: absolute;
      width: 100%;
      background: white;
      border-radius: 1rem;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      cursor: grab;
      user-select: none;
      transition: transform 0.1s ease-out;
      touch-action: none;
    }
    .swipe-card:active { cursor: grabbing; }
    .swipe-card.swiping { transition: none; }
    .swipe-card.animate-left {
      animation: swipeLeft 0.4s ease-out forwards;
    }
    .swipe-card.animate-right {
      animation: swipeRight 0.4s ease-out forwards;
    }
    @keyframes swipeLeft {
      to { transform: translateX(-150%) rotate(-30deg); opacity: 0; }
    }
    @keyframes swipeRight {
      to { transform: translateX(150%) rotate(30deg); opacity: 0; }
    }
    
    /* Tinder-style card stack */
    .card-stack-item {
      position: absolute;
      width: 100%;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      cursor: grab;
    }
    .card-stack-item:active {
      cursor: grabbing;
    }
    .card-stack-item:nth-child(1) {
      z-index: 3;
      transform: scale(1);
    }
    .card-stack-item:nth-child(2) {
      z-index: 2;
      transform: scale(0.95) translateY(10px);
      filter: brightness(0.97);
    }
    .card-stack-item:nth-child(3) {
      z-index: 1;
      transform: scale(0.9) translateY(20px);
      filter: brightness(0.94);
    }
    
    /* Swipe overlays */
    .swipe-card .swipe-overlay {
      position: absolute;
      top: 20px;
      padding: 8px 20px;
      border-radius: 8px;
      font-size: 24px;
      font-weight: bold;
      opacity: 0;
      transition: opacity 0.2s;
      z-index: 10;
    }
    .swipe-card .swipe-overlay.nope {
      left: 20px;
      background: #fff;
      color: var(--reforge-orange);
      border: 3px solid var(--reforge-orange);
      transform: rotate(-15deg);
    }
    .swipe-card .swipe-overlay.like {
      right: 20px;
      background: #fff;
      color: var(--reforge-teal);
      border: 3px solid var(--reforge-teal);
      transform: rotate(15deg);
    }
    
    /* Dragging states */
    .swipe-card.dragging-left .swipe-overlay.nope {
      opacity: 1;
    }
    .swipe-card.dragging-right .swipe-overlay.like {
      opacity: 1;
    }
    .card-stack-item {
      position: absolute;
      width: 100%;
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .card-stack-item:nth-child(1) { z-index: 3; }
    .card-stack-item:nth-child(2) { z-index: 2; transform: scale(0.95) translateY(10px); opacity: 0.7; }
    .card-stack-item:nth-child(3) { z-index: 1; transform: scale(0.9) translateY(20px); opacity: 0.4; }
    .icp-score-ring {
      width: 64px; height: 64px;
      border-radius: 50%;
      background: conic-gradient(var(--score-color) calc(var(--score) * 3.6deg), #e5e7eb 0deg);
      display: flex; align-items: center; justify-content: center;
    }
    .icp-score-ring-inner {
      width: 52px; height: 52px;
      border-radius: 50%;
      background: white;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; font-size: 1.1rem;
    }
    .swipe-overlay {
      position: absolute; top: 20px;
      padding: 8px 20px; border-radius: 8px;
      font-weight: 700; font-size: 1.5rem;
      transform: rotate(-15deg);
      opacity: 0; transition: opacity 0.2s;
      pointer-events: none;
    }
    .swipe-overlay.nope { left: 20px; border: 4px solid #ED5624; color: #ED5624; }
    .swipe-overlay.like { right: 20px; border: 4px solid #57A499; color: #57A499; transform: rotate(15deg); }
  </style>
</head>
<body class="gradient-bg min-h-screen text-gray-900">
  <div class="flex">
    <!-- Sidebar Navigation -->
    <nav class="w-64 min-h-screen bg-white border-r border-gray-200 fixed shadow-sm">
      <div class="p-6">
        <div class="flex items-center gap-3 mb-8">
          <div class="w-10 h-10 flex items-center justify-center">
            <svg width="32" height="32" viewBox="0 0 100 100" fill="none">
              <path d="M20 78 Q8 68 12 52 Q16 40 32 36 Q42 34 46 42 Q50 50 42 58 Q34 66 24 74 Q22 76 20 78Z" fill="#000"/>
              <path d="M38 56 Q28 44 36 28 Q44 14 64 16 Q82 18 86 36 Q90 52 76 64 Q62 74 46 66 Q42 64 38 56Z" fill="#000"/>
            </svg>
          </div>
          <div>
            <h1 class="font-semibold text-lg text-gray-900">Reforge</h1>
            <p class="text-xs text-reforge-muted">Command Center</p>
          </div>
        </div>
        
        <div class="space-y-1">
          <a href="#overview" class="nav-link active flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('overview')">
            <span>üìä</span> Overview
          </a>
          <a href="#discovery" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('discovery')">
            <span>üîç</span> Discovery Validation
          </a>
          <a href="#pitch-deck" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('pitch-deck')">
            <span>üìë</span> Pitch Deck Generator
          </a>
          <a href="#lead-qualifier" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('lead-qualifier')">
            <span>üéØ</span> Lead Qualifier
          </a>
          <a href="#signals" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('signals')">
            <span>üì°</span> Signals (Swiper)
          </a>
          <a href="#opportunities" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('opportunities')">
            <span>üí∞</span> Opportunity Decisions
          </a>
          <a href="#competitive" class="nav-link flex items-center gap-3 px-4 py-3 rounded-lg text-sm font-medium" onclick="showSection('competitive')">
            <span>üëÅÔ∏è</span> Competitive Listener
          </a>
        </div>
        
        <div class="absolute bottom-6 left-6 right-6">
          <div class="bg-reforge-cream rounded-lg p-4 border border-reforge-mustard/30">
            <p class="text-xs text-gray-600 mb-1">Q1 2026 Progress</p>
            <div class="flex items-center gap-2">
              <div class="flex-1 h-2 bg-gray-200 rounded-full overflow-hidden">
                <div class="h-full bg-reforge-orange rounded-full" style="width: 29%"></div>
              </div>
              <span class="text-xs font-semibold text-reforge-orange">29%</span>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="ml-64 flex-1 p-8">
      
      <!-- Overview Section -->
      <section id="overview" class="section">
        <header class="mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">GTM-E Overview</h2>
          <p class="text-reforge-muted">Q1 2026 ‚Ä¢ Product Discovery Agent Launch</p>
        </header>

        <!-- Key Metrics -->
        <div class="grid grid-cols-4 gap-4 mb-8">
          <div class="card rounded-xl p-5">
            <p class="text-reforge-muted text-sm mb-1">Meetings Booked</p>
            <div class="flex items-baseline gap-2">
              <span class="text-3xl font-bold text-reforge-teal">20</span>
              <span class="text-sm text-reforge-muted">/70</span>
            </div>
            <div class="mt-2 h-1.5 bg-gray-100 rounded-full">
              <div class="h-full bg-reforge-teal rounded-full" style="width: 29%"></div>
            </div>
          </div>
          
          <div class="card rounded-xl p-5">
            <p class="text-reforge-muted text-sm mb-1">Jonathan's Calls</p>
            <div class="flex items-baseline gap-2">
              <span class="text-3xl font-bold text-reforge-orange">20</span>
              <span class="text-sm text-reforge-muted">Q1</span>
            </div>
            <p class="text-xs text-reforge-muted mt-2">~5/week average</p>
          </div>
          
          <div class="card rounded-xl p-5">
            <p class="text-reforge-muted text-sm mb-1">Pipeline in Pilot</p>
            <div class="flex items-baseline gap-2">
              <span class="text-3xl font-bold text-reforge-teal">$83K</span>
            </div>
            <p class="text-xs text-reforge-teal mt-2">Muse $15K closing ‚Ä¢ 4 active</p>
          </div>
          
          <div class="card rounded-xl p-5">
            <p class="text-reforge-muted text-sm mb-1">Pipeline</p>
            <div class="flex items-baseline gap-2">
              <span class="text-3xl font-bold text-gray-900">$311K</span>
            </div>
            <p class="text-xs text-reforge-teal mt-2">‚Üë Active opportunities</p>
          </div>
        </div>

        <!-- Two Column Layout -->
        <div class="grid grid-cols-2 gap-6 mb-8">
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 flex items-center gap-2 text-gray-900">
              <span class="w-2 h-2 bg-reforge-orange rounded-full"></span>
              Current Positioning
            </h3>
            <div class="space-y-4">
              <div class="border-l-2 border-reforge-orange pl-3">
                <p class="text-xs text-reforge-muted uppercase tracking-wide">Problem We Own</p>
                <p class="font-semibold text-reforge-orange">The Discovery Deficit</p>
              </div>
              <div class="border-l-2 border-reforge-teal pl-3">
                <p class="text-xs text-reforge-muted uppercase tracking-wide">Our Position</p>
                <p class="font-semibold text-reforge-teal">Product Discovery Suite</p>
              </div>
              <div class="border-l-2 border-reforge-mustard pl-3">
                <p class="text-xs text-reforge-muted uppercase tracking-wide">The Enemy</p>
                <p class="font-semibold text-reforge-mustard">Product Debt</p>
              </div>
            </div>
          </div>

          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 flex items-center gap-2 text-gray-900">
              <span class="w-2 h-2 bg-reforge-teal rounded-full"></span>
              Q1 Workstreams
            </h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-sm text-gray-900">A: Messaging & Personalization</p>
                  <p class="text-xs text-reforge-muted">Testing angles</p>
                </div>
                <span class="px-2 py-1 bg-reforge-mustard/20 text-reforge-mustard text-xs rounded-full font-medium">Active</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-sm text-gray-900">B: Audiences & Signals</p>
                  <p class="text-xs text-reforge-muted">Signal experiments</p>
                </div>
                <span class="px-2 py-1 bg-reforge-teal/20 text-reforge-teal text-xs rounded-full font-medium">Live</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-sm text-gray-900">C: Infrastructure & AI</p>
                  <p class="text-xs text-reforge-muted">Building agents</p>
                </div>
                <span class="px-2 py-1 bg-reforge-orange/20 text-reforge-orange text-xs rounded-full font-medium">Building</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Recent Calls -->
        <div class="card rounded-xl p-6">
          <h3 class="font-semibold mb-4 text-gray-900">Recent Calls</h3>
          <div class="grid grid-cols-2 gap-4" id="recentCalls"></div>
        </div>
      </section>

      <!-- Discovery Validation Section -->
      <section id="discovery" class="section hidden">
        <header class="mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Discovery Validation</h2>
          <p class="text-reforge-muted">Comprehensive analysis of 24 Gong call transcripts (Jan 7-30, 2026)</p>
        </header>
        
        <div id="discoveryContent">
          <!-- Key Metrics Row -->
          <div class="grid grid-cols-5 gap-4 mb-6">
            <div class="card rounded-xl p-5">
              <p class="text-reforge-muted text-sm mb-1">Calls Analyzed</p>
              <div class="flex items-baseline gap-2">
                <span class="text-3xl font-bold text-reforge-teal">24</span>
              </div>
              <p class="text-xs text-reforge-muted mt-2">External discovery calls</p>
            </div>
            <div class="card rounded-xl p-5">
              <p class="text-reforge-muted text-sm mb-1">Discovery Deficit</p>
              <div class="flex items-baseline gap-2">
                <span class="text-3xl font-bold text-reforge-teal">82%</span>
              </div>
              <p class="text-xs text-reforge-teal mt-2">‚úì Resonance (14/17)</p>
            </div>
            <div class="card rounded-xl p-5 border-2 border-reforge-orange">
              <p class="text-reforge-muted text-sm mb-1">Product Debt</p>
              <div class="flex items-baseline gap-2">
                <span class="text-3xl font-bold text-reforge-orange">100%</span>
              </div>
              <p class="text-xs text-reforge-orange mt-2">üî• Perfect resonance (8/8)</p>
            </div>
            <div class="card rounded-xl p-5">
              <p class="text-reforge-muted text-sm mb-1">Ready to Evaluate</p>
              <div class="flex items-baseline gap-2">
                <span class="text-3xl font-bold text-reforge-teal">15</span>
                <span class="text-sm text-reforge-muted">/24</span>
              </div>
              <p class="text-xs text-reforge-teal mt-2">62.5% conversion ready</p>
            </div>
            <div class="card rounded-xl p-5">
              <p class="text-reforge-muted text-sm mb-1">Avg Duration</p>
              <div class="flex items-baseline gap-2">
                <span class="text-3xl font-bold text-gray-900">22</span>
                <span class="text-sm text-reforge-muted">min</span>
              </div>
              <p class="text-xs text-reforge-muted mt-2">Good engagement</p>
            </div>
          </div>

          <!-- Big Insight -->
          <div class="card rounded-xl p-6 mb-6 border-l-4 border-reforge-orange">
            <h3 class="font-semibold text-reforge-orange mb-2">üî• BIG INSIGHT</h3>
            <p class="text-lg text-gray-900 mb-2"><strong>"Product Debt"</strong> has <strong>100% resonance</strong> but you only used it on <strong>33% of calls</strong> (8/24).</p>
            <p class="text-reforge-muted">That's your sharpest weapon collecting dust. Lead with it on EVERY call.</p>
          </div>

          <!-- Breakdowns Grid -->
          <div class="grid grid-cols-2 gap-6 mb-6">
            <!-- Company Size Breakdown -->
            <div class="card rounded-xl p-6">
              <h3 class="font-semibold mb-4 text-gray-900">üìä By Company Size</h3>
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-teal rounded-full"></div>
                    <span class="text-sm">Enterprise (500+)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-teal rounded-full" style="width: 33%"></div>
                    </div>
                    <span class="text-sm font-medium">8 (33%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-mustard rounded-full"></div>
                    <span class="text-sm">Mid-market (201-500)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-mustard rounded-full" style="width: 25%"></div>
                    </div>
                    <span class="text-sm font-medium">6 (25%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-orange rounded-full"></div>
                    <span class="text-sm">SMB (51-200)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-orange rounded-full" style="width: 29%"></div>
                    </div>
                    <span class="text-sm font-medium">7 (29%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
                    <span class="text-sm">Startup (&lt;50)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-gray-400 rounded-full" style="width: 13%"></div>
                    </div>
                    <span class="text-sm font-medium">3 (13%)</span>
                  </div>
                </div>
              </div>
              <p class="text-xs text-reforge-teal mt-4 font-medium">‚úì Best fit: Enterprise (500+) ‚Äî complex discovery needs</p>
            </div>

            <!-- Persona Breakdown -->
            <div class="card rounded-xl p-6">
              <h3 class="font-semibold mb-4 text-gray-900">üë§ By Persona/Title</h3>
              <div class="space-y-3">
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-teal rounded-full"></div>
                    <span class="text-sm">Product Leader (VP/Dir)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-teal rounded-full" style="width: 50%"></div>
                    </div>
                    <span class="text-sm font-medium">12 (50%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-mustard rounded-full"></div>
                    <span class="text-sm">Product Manager</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-mustard rounded-full" style="width: 21%"></div>
                    </div>
                    <span class="text-sm font-medium">5 (21%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-reforge-orange rounded-full"></div>
                    <span class="text-sm">C-Suite (CEO/CPO/CSO)</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-reforge-orange rounded-full" style="width: 13%"></div>
                    </div>
                    <span class="text-sm font-medium">3 (13%)</span>
                  </div>
                </div>
                <div class="flex items-center justify-between">
                  <div class="flex items-center gap-2">
                    <div class="w-3 h-3 bg-gray-400 rounded-full"></div>
                    <span class="text-sm">Designer/Research + Ops</span>
                  </div>
                  <div class="flex items-center gap-2">
                    <div class="w-24 h-2 bg-gray-100 rounded-full overflow-hidden">
                      <div class="h-full bg-gray-400 rounded-full" style="width: 16%"></div>
                    </div>
                    <span class="text-sm font-medium">4 (16%)</span>
                  </div>
                </div>
              </div>
              <p class="text-xs text-reforge-teal mt-4 font-medium">‚úì Best fit: Product Leaders ‚Äî decision authority</p>
            </div>
          </div>

          <!-- Industry & AI Adoption Row -->
          <div class="grid grid-cols-2 gap-6 mb-6">
            <!-- Industry Breakdown -->
            <div class="card rounded-xl p-6">
              <h3 class="font-semibold mb-4 text-gray-900">üè¢ By Industry</h3>
              <div class="grid grid-cols-2 gap-2">
                <div class="bg-reforge-teal/10 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-reforge-teal">10</p>
                  <p class="text-xs text-gray-600">B2B SaaS</p>
                </div>
                <div class="bg-reforge-mustard/10 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-reforge-mustard">4</p>
                  <p class="text-xs text-gray-600">FinTech</p>
                </div>
                <div class="bg-reforge-orange/10 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-reforge-orange">3</p>
                  <p class="text-xs text-gray-600">Enterprise SW</p>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-gray-600">2</p>
                  <p class="text-xs text-gray-600">Consumer Health</p>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-gray-600">2</p>
                  <p class="text-xs text-gray-600">Media/Ent</p>
                </div>
                <div class="bg-gray-100 rounded-lg p-3 text-center">
                  <p class="text-2xl font-bold text-gray-600">3</p>
                  <p class="text-xs text-gray-600">Other</p>
                </div>
              </div>
            </div>

            <!-- AI Adoption Breakdown -->
            <div class="card rounded-xl p-6">
              <h3 class="font-semibold mb-4 text-gray-900">ü§ñ AI Adoption Level</h3>
              <div class="space-y-4">
                <div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">None/Minimal</span>
                    <span class="text-sm font-medium">11 (46%)</span>
                  </div>
                  <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-gray-400 rounded-full" style="width: 46%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Experimenting</span>
                    <span class="text-sm font-medium text-reforge-teal">8 (33%) ‚≠ê</span>
                  </div>
                  <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-reforge-teal rounded-full" style="width: 33%"></div>
                  </div>
                </div>
                <div>
                  <div class="flex justify-between mb-1">
                    <span class="text-sm text-gray-600">Active (AI in code)</span>
                    <span class="text-sm font-medium">5 (21%)</span>
                  </div>
                  <div class="h-3 bg-gray-100 rounded-full overflow-hidden">
                    <div class="h-full bg-reforge-orange rounded-full" style="width: 21%"></div>
                  </div>
                </div>
              </div>
              <p class="text-xs text-reforge-teal mt-4 font-medium">‚úì Sweet spot: Experimenting ‚Äî see gap, not locked in</p>
            </div>
          </div>

          <!-- Prototype Tool History -->
          <div class="card rounded-xl p-6 mb-6">
            <h3 class="font-semibold mb-4 text-gray-900">üõ†Ô∏è Prototype Tool Evaluation History</h3>
            <p class="text-sm text-gray-600 mb-4">14 of 24 companies (58%) have evaluated prototype/build tools before</p>
            <div class="grid grid-cols-4 gap-3 mb-4">
              <div class="bg-gray-50 rounded-lg p-3 text-center">
                <p class="font-semibold text-gray-900">Replit</p>
                <p class="text-xs text-gray-500">Ecovadis tested</p>
              </div>
              <div class="bg-gray-50 rounded-lg p-3 text-center">
                <p class="font-semibold text-gray-900">Lovable</p>
                <p class="text-xs text-gray-500">Maestro CEO loves</p>
              </div>
              <div class="bg-gray-50 rounded-lg p-3 text-center">
                <p class="font-semibold text-gray-900">ProductBoard</p>
                <p class="text-xs text-gray-500">"Too manual/$$"</p>
              </div>
              <div class="bg-gray-50 rounded-lg p-3 text-center">
                <p class="font-semibold text-gray-900">Dovetail</p>
                <p class="text-xs text-gray-500">Brigit uses</p>
              </div>
            </div>
            <div class="bg-reforge-mustard/10 rounded-lg p-3">
              <p class="text-sm font-medium text-gray-900">Common Issues with Existing Tools:</p>
              <p class="text-xs text-gray-600 mt-1">Too expensive ‚Ä¢ Not collaborative ‚Ä¢ No integration with existing stack ‚Ä¢ Too manual</p>
            </div>
          </div>

          <!-- Two Column: Framing Analysis -->
          <div class="grid grid-cols-2 gap-6 mb-6">
            <div class="card rounded-xl p-6">
              <h3 class="font-semibold mb-4 text-gray-900">"Discovery Deficit" Framing</h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Usage Rate</span>
                  <span class="font-medium text-reforge-teal">17/24 calls (71%)</span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Resonance When Used</span>
                  <span class="font-medium text-reforge-teal">82% (14/17)</span>
                </div>
              </div>
              <div class="mt-4 bg-gray-50 rounded-lg p-3">
                <p class="text-xs text-reforge-muted italic">"It's gotten a lot faster and easier to go and ship code... validating and understanding what to ship becomes the difficult part."</p>
                <p class="text-xs text-gray-500 mt-1">‚Äî Jonathan on DreamHost call</p>
              </div>
            </div>

            <div class="card rounded-xl p-6 border-2 border-reforge-orange">
              <h3 class="font-semibold mb-4 text-reforge-orange">"Product Debt" as Enemy ‚ö†Ô∏è</h3>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Usage Rate</span>
                  <span class="font-medium text-reforge-orange">8/24 calls (33%)</span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-sm text-gray-600">Resonance When Used</span>
                  <span class="font-medium text-reforge-teal">100% (8/8)</span>
                </div>
              </div>
              <div class="mt-4 bg-reforge-orange/10 rounded-lg p-3">
                <p class="text-xs text-gray-700 italic">"It's just really difficult to prove the value of a product before it goes out. Any data you could do as fast as possible is absolutely a real pain point."</p>
                <p class="text-xs text-reforge-orange mt-1">‚Äî Ralph Castro, DreamHost (27+ years in product)</p>
              </div>
            </div>
          </div>

          <!-- Top Objections -->
          <div class="card rounded-xl p-6 mb-6">
            <h3 class="font-semibold mb-4 text-reforge-mustard">‚ö†Ô∏è Top Objections</h3>
            <div class="grid grid-cols-3 gap-4">
              <div class="bg-reforge-mustard/10 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-lg">üîå</span>
                  <p class="font-medium text-sm text-gray-900">Integration (50%)</p>
                </div>
                <p class="text-xs text-gray-600">"Our organization is very focused on ClickUp... it's central to how we organize all our work"</p>
                <p class="text-xs text-gray-500 mt-1">‚Äî DreamHost</p>
              </div>
              <div class="bg-reforge-mustard/10 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-lg">üîÑ</span>
                  <p class="font-medium text-sm text-gray-900">Existing Tools (33%)</p>
                </div>
                <p class="text-xs text-gray-600">"We use ProductBoard mainly... it would be nice not to change it."</p>
                <p class="text-xs text-gray-500 mt-1">‚Äî Ecovadis</p>
              </div>
              <div class="bg-reforge-mustard/10 rounded-lg p-4">
                <div class="flex items-center gap-2 mb-2">
                  <span class="text-lg">üí∞</span>
                  <p class="font-medium text-sm text-gray-900">Price (21%)</p>
                </div>
                <p class="text-xs text-gray-600">"Budget is around 60K annual" (vs 250-300K list)</p>
                <p class="text-xs text-gray-500 mt-1">‚Äî Neo Financial</p>
              </div>
            </div>
          </div>

          <!-- Call Results -->
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 text-gray-900">Call-by-Call Results (24 calls)</h3>
            <div class="space-y-3" id="callResults">
              <!-- Populated by JS -->
            </div>
          </div>
        </div>
      </section>

      <!-- Pitch Deck Generator Section -->
      <section id="pitch-deck" class="section hidden">
        <header class="mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Pitch Deck Generator</h2>
          <p class="text-reforge-muted">Customize "Why Reforge" deck for each prospect</p>
        </header>
        
        <div class="card rounded-xl p-6 mb-6">
          <h3 class="font-semibold mb-4 text-gray-900">Generate Custom Deck</h3>
          
          <div class="grid grid-cols-2 gap-6">
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Company Name</label>
              <input type="text" id="deckCompany" placeholder="e.g., Acme Corp" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Company Website</label>
              <input type="url" id="deckWebsite" placeholder="https://acme.com" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
              <p class="text-xs text-reforge-muted mt-1">We'll scrape for context automatically</p>
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">LinkedIn URL (optional)</label>
              <input type="url" id="deckLinkedIn" placeholder="https://linkedin.com/company/acme" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Buyer Persona</label>
              <select id="deckPersona" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:outline-none">
                <option value="product-leader">Product Leader</option>
                <option value="pm">Product Manager</option>
                <option value="designer">Designer</option>
                <option value="engineering-leader">Engineering Leader</option>
                <option value="finance">Finance/Procurement</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Company Size</label>
              <select id="deckSize" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:outline-none">
                <option value="51-200">51-200 employees</option>
                <option value="201-500">201-500 employees</option>
                <option value="500+">500+ employees</option>
              </select>
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Primary Pain Point</label>
              <select id="deckPain" class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:outline-none">
                <option value="discovery-deficit">Discovery can't keep up with engineering</option>
                <option value="product-debt">Maintaining unused features</option>
                <option value="validation-speed">Slow customer validation</option>
                <option value="context-gathering">Manual context gathering</option>
              </select>
            </div>
          </div>
          
          <div class="mt-6">
            <label class="block text-sm text-gray-700 mb-2 font-medium">Additional Context (optional)</label>
            <textarea id="deckContext" rows="3" placeholder="Any specific details about the company, their tech stack, recent news..."
              class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:outline-none resize-none"></textarea>
          </div>
          
          <div class="flex gap-3 mt-6">
            <button onclick="researchCompany()" class="btn-secondary px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
              üîç Research First
            </button>
            <button onclick="generateDeck()" class="btn-primary px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all">
              üé® Generate Custom Deck
            </button>
          </div>
        </div>

        <!-- Research Results -->
        <div id="researchResult" class="hidden card rounded-xl p-6 mb-6">
          <h3 class="font-semibold mb-4 text-gray-900">üîç Company Research</h3>
          <div id="researchContent"></div>
        </div>

        <div id="deckResult" class="hidden card rounded-xl p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-semibold text-gray-900">Generated Deck</h3>
            <div class="flex gap-2">
              <button class="px-4 py-2 bg-gray-100 rounded-lg text-sm hover:bg-gray-200 text-gray-700 font-medium">
                üì• Download PDF
              </button>
              <button class="btn-secondary px-4 py-2 rounded-lg text-sm font-medium">
                üì§ Save to Drive
              </button>
            </div>
          </div>
          <div id="deckPreview" class="bg-gray-50 rounded-lg p-4 min-h-[300px]"></div>
        </div>
      </section>

      <!-- Lead Qualifier Section - Apollo Enrichment -->
      <section id="lead-qualifier" class="section hidden">
        <header class="mb-6">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-2xl font-bold text-gray-900 mb-2">Lead Qualifier</h2>
              <p class="text-reforge-muted">Enrich leads with Apollo API ‚Ä¢ Real-time company intelligence</p>
            </div>
            
          </div>
        </header>

        <!-- Enrichment Form -->
        <div class="card rounded-xl p-6 mb-6">
          <h3 class="font-semibold mb-4 text-gray-900 flex items-center gap-2">
            <span class="text-lg">üîç</span> Enrich New Lead (Apollo API)
          </h3>
          <div class="grid grid-cols-3 gap-4 mb-4">
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Company Website</label>
              <input type="text" id="enrichDomain" placeholder="acme.com or https://acme.com" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">OR LinkedIn URL</label>
              <input type="text" id="enrichLinkedIn" placeholder="linkedin.com/company/acme" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
            </div>
            <div>
              <label class="block text-sm text-gray-700 mb-2 font-medium">Company Name (fallback)</label>
              <input type="text" id="enrichCompanyName" placeholder="Acme Corp" 
                class="w-full bg-white border border-gray-300 rounded-lg px-4 py-3 focus:border-reforge-orange focus:ring-1 focus:ring-reforge-orange focus:outline-none">
            </div>
          </div>
          <div class="flex gap-3">
            <button onclick="qualifyLead()" id="enrichBtn" class="btn-primary px-6 py-3 rounded-lg font-medium hover:shadow-lg transition-all flex items-center gap-2">
              <span id="enrichBtnIcon">üéØ</span>
              <span id="enrichBtnText">Qualify Lead</span>
            </button>
            <p class="text-xs text-reforge-muted self-center">Powered by Apollo.io ‚Ä¢ Real-time company enrichment</p>
          </div>
        </div>

        <!-- Enrichment Result -->
        <div id="enrichResult" class="hidden card rounded-xl p-6 mb-6 border-l-4 border-reforge-teal">
          <div class="flex items-start justify-between mb-4">
            <div class="flex items-center gap-4">
              <img id="enrichLogo" src="" alt="" class="w-16 h-16 rounded-lg object-cover bg-gray-100" onerror="this.style.display='none'">
              <div>
                <h3 id="enrichCompanyTitle" class="text-xl font-bold text-gray-900"></h3>
                <p id="enrichIndustry" class="text-reforge-muted"></p>
                <a id="enrichWebsite" href="#" target="_blank" class="text-sm text-reforge-teal hover:underline"></a>
              </div>
            </div>
            <div class="text-right">
              <div class="icp-score-ring mx-auto mb-2" id="enrichScoreRing">
                <div class="icp-score-ring-inner" id="enrichScoreValue">‚Äî</div>
              </div>
              <p id="enrichRecommendation" class="text-sm font-medium"></p>
            </div>
          </div>
          
          <div class="grid grid-cols-4 gap-4 mb-4">
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted uppercase tracking-wide">Employees</p>
              <p id="enrichEmployees" class="font-semibold text-gray-900">‚Äî</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted uppercase tracking-wide">Founded</p>
              <p id="enrichFounded" class="font-semibold text-gray-900">‚Äî</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted uppercase tracking-wide">Funding Stage</p>
              <p id="enrichFunding" class="font-semibold text-gray-900">‚Äî</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted uppercase tracking-wide">Location</p>
              <p id="enrichLocation" class="font-semibold text-gray-900">‚Äî</p>
            </div>
          </div>

          <div class="mb-4">
            <p class="text-xs text-reforge-muted uppercase tracking-wide mb-2">Description</p>
            <p id="enrichDescription" class="text-sm text-gray-700"></p>
          </div>

          <div class="mb-4">
            <p class="text-xs text-reforge-muted uppercase tracking-wide mb-2">Tech Stack</p>
            <div id="enrichTechStack" class="flex flex-wrap gap-2"></div>
          </div>

          <div class="mb-4">
            <p class="text-xs text-reforge-muted uppercase tracking-wide mb-2">ICP Score Breakdown</p>
            <div id="enrichScoreBreakdown" class="space-y-2"></div>
          </div>

          <div class="flex gap-3 pt-4 border-t border-gray-100">
            <button onclick="addEnrichedToSwiper()" class="btn-secondary px-4 py-2 rounded-lg text-sm font-medium">
              ‚úÖ Save Lead
            </button>
            <button onclick="copyEnrichedData()" class="px-4 py-2 bg-gray-100 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-200">
              üìã Copy Data
            </button>
          </div>
        </div>

        <!-- Enrichment Error -->
        <div id="enrichError" class="hidden card rounded-xl p-6 mb-6 border-l-4 border-reforge-orange bg-reforge-orange/5">
          <div class="flex items-center gap-3">
            <span class="text-2xl">‚ö†Ô∏è</span>
            <div>
              <h4 class="font-semibold text-gray-900">Enrichment Failed</h4>
              <p id="enrichErrorMessage" class="text-sm text-gray-600"></p>
            </div>
          </div>
        </div>

      </section>

      <!-- Signals Section - Embedded Swiper -->
      <section id="signals" class="section hidden">
        <header class="mb-6">
          <div class="flex items-center justify-between">
            <div>
              <h2 class="text-2xl font-bold text-gray-900 mb-2">Signals (Swiper)</h2>
              <p class="text-reforge-muted">Swipe right to qualify leads, left to skip ‚Ä¢ Keyboard: A/‚Üê skip, D/‚Üí qualify</p>
            </div>
            <div class="flex items-center gap-4">
              <div class="text-right">
                <p class="text-sm text-reforge-muted">Progress</p>
                <p class="text-lg font-bold"><span id="qualifiedCount" class="text-reforge-teal">0</span> qualified / <span id="reviewedCount" class="text-reforge-orange">0</span> reviewed</p>
              </div>
              <div class="flex items-center gap-2">
                <button onclick="exportQueue()" class="btn-secondary px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 relative">
                  üîó LinkedIn Queue
                  <span id="queueBadge" class="absolute -top-2 -right-2 w-5 h-5 bg-reforge-orange text-white text-xs rounded-full items-center justify-center hidden">0</span>
                </button>
                <button onclick="exportQualifiedLeads()" class="btn-primary px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2">
                  üì• Export Qualified
                </button>
              </div>
            </div>
          </div>
        </header>

        <div class="grid grid-cols-4 gap-6">
          <!-- Swiper Area -->
          <div class="col-span-3" style="min-height: 550px;">
            <div class="relative h-[400px] flex items-center justify-center">
              <!-- Card Stack -->
              <div id="cardStack" class="relative w-full max-w-lg">
                <!-- Cards rendered here by JS -->
              </div>
              
              <!-- Swipe Indicators -->
              <div id="swipeLeftIndicator" class="absolute left-4 top-1/2 -translate-y-1/2 opacity-0 transition-opacity duration-200">
                <div class="w-20 h-20 rounded-full bg-reforge-orange/20 flex items-center justify-center">
                  <span class="text-4xl">‚úó</span>
                </div>
              </div>
              <div id="swipeRightIndicator" class="absolute right-4 top-1/2 -translate-y-1/2 opacity-0 transition-opacity duration-200">
                <div class="w-20 h-20 rounded-full bg-reforge-teal/20 flex items-center justify-center">
                  <span class="text-4xl">‚úì</span>
                </div>
              </div>
              
              <!-- Empty State -->
              <div id="emptyState" class="hidden absolute inset-0 flex items-center justify-center">
                <div class="text-center">
                  <div class="w-24 h-24 bg-reforge-teal/20 rounded-full flex items-center justify-center mx-auto mb-4">
                    <span class="text-5xl">üéâ</span>
                  </div>
                  <h3 class="text-xl font-bold text-gray-900 mb-2">All Done!</h3>
                  <p class="text-reforge-muted mb-4">You've reviewed all <span id="totalLeads">50</span> leads</p>
                  <button onclick="resetSwiper()" class="btn-primary px-6 py-3 rounded-lg font-medium">
                    üîÑ Start Over
                  </button>
                </div>
              </div>
            </div>

            <!-- Keyboard hint -->
            <p class="text-center text-sm text-reforge-muted mt-4">Keyboard: A/‚Üê skip ‚Ä¢ D/‚Üí qualify</p>
          </div>

          <!-- Sidebar -->
          <div class="space-y-4">
            <div class="card rounded-xl p-5">
              <h3 class="font-semibold mb-3 text-gray-900 text-sm">ICP Criteria</h3>
              <div class="space-y-2 text-xs">
                <div class="flex items-start gap-2"><span class="text-reforge-teal">‚úì</span><span>50-1,000 employees</span></div>
                <div class="flex items-start gap-2"><span class="text-reforge-teal">‚úì</span><span>B2B / B2C / B2B2C</span></div>
                <div class="flex items-start gap-2"><span class="text-reforge-teal">‚úì</span><span>Web app (not mobile-only)</span></div>
                <div class="flex items-start gap-2"><span class="text-reforge-teal">‚úì</span><span>Product team hiring</span></div>
                <div class="flex items-start gap-2"><span class="text-reforge-orange">‚úó</span><span>Hardware companies</span></div>
              </div>
              <p class="text-xs text-reforge-muted mt-3 pt-3 border-t border-gray-100">Signals from: Apollo, LinkedIn, job posts</p>
            </div>
            
            <div class="card rounded-xl p-5">
              <h3 class="font-semibold mb-3 text-gray-900 text-sm">Recently Qualified</h3>
              <div id="recentQualified" class="space-y-2 max-h-64 overflow-y-auto">
                <p class="text-xs text-reforge-muted italic">None yet‚Äîstart swiping!</p>
              </div>
            </div>
            
            <div class="card rounded-xl p-5">
              <h3 class="font-semibold mb-3 text-gray-900 text-sm">Session Stats</h3>
              <div class="space-y-2 text-sm">
                <div class="flex justify-between"><span class="text-reforge-muted">Qualify Rate</span><span id="qualifyRate" class="font-medium">‚Äî</span></div>
                <div class="flex justify-between"><span class="text-reforge-muted">Avg ICP Score</span><span id="avgScore" class="font-medium">‚Äî</span></div>
                <div class="flex justify-between"><span class="text-reforge-muted">Remaining</span><span id="remainingCount" class="font-medium">50</span></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Opportunity Decisions Section -->
      <section id="opportunities" class="section hidden">
        <header class="mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Opportunity Decisions</h2>
          <p class="text-reforge-muted">Track and decide on active pipeline</p>
        </header>
        
        <div class="card rounded-xl p-6 mb-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="font-semibold text-gray-900">Active Pipeline: $311K</h3>
            <div class="flex gap-2">
              <button class="px-3 py-1 bg-gray-100 rounded-lg text-sm text-gray-700">All</button>
              <button class="px-3 py-1 bg-reforge-orange/10 text-reforge-orange rounded-lg text-sm font-medium">Needs Decision</button>
              <button class="px-3 py-1 bg-gray-100 rounded-lg text-sm text-gray-700">Stale</button>
            </div>
          </div>
          
          <div class="overflow-x-auto">
            <table class="w-full text-sm">
              <thead>
                <tr class="text-gray-500 border-b border-gray-200">
                  <th class="text-left py-3 font-medium">Account</th>
                  <th class="text-left py-3 font-medium">Product</th>
                  <th class="text-right py-3 font-medium">Size</th>
                  <th class="text-left py-3 font-medium">Status</th>
                  <th class="text-left py-3 font-medium">Last Activity</th>
                  <th class="text-right py-3 font-medium">Action</th>
                </tr>
              </thead>
              <tbody id="opportunitiesTable"></tbody>
            </table>
          </div>
        </div>

        <div class="grid grid-cols-2 gap-6">
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 text-reforge-mustard">‚ö†Ô∏è Stale Opportunities</h3>
            <p class="text-sm text-reforge-muted mb-4">No activity in 7+ days</p>
            <div id="staleOpps" class="space-y-2"></div>
          </div>
          
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 text-reforge-orange">üî• Hot Opportunities</h3>
            <p class="text-sm text-reforge-muted mb-4">Needs immediate attention</p>
            <div class="space-y-2">
              <div class="bg-reforge-orange/5 border border-reforge-orange/30 rounded-lg p-3">
                <div class="flex items-center justify-between">
                  <span class="font-medium text-gray-900">EvenUp</span>
                  <span class="text-sm text-gray-700">$50K</span>
                </div>
                <p class="text-xs text-reforge-muted mt-1">Pilot stalled 105+ days ‚Ä¢ Just raised $150M</p>
                <p class="text-xs text-reforge-orange mt-2 font-medium">‚Üí Re-engage while in momentum mode</p>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Competitive Listener Section -->
      <section id="competitive" class="section hidden">
        <header class="mb-8">
          <h2 class="text-2xl font-bold text-gray-900 mb-2">Competitive Listener</h2>
          <p class="text-reforge-muted">Competitor mentions from <strong>PROSPECTS ONLY</strong> across 100 Gong transcripts ‚Ä¢ Excludes Jonathan's pitch</p>
        </header>
        
        <div class="grid grid-cols-2 gap-6 mb-6">
          <!-- Top Prospect-Mentioned Tools -->
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 text-gray-900 flex items-center gap-2">
              <span class="w-2 h-2 bg-reforge-orange rounded-full"></span>
              Top Tools Mentioned by Prospects
            </h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between bg-reforge-orange/5 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Figma</p>
                  <p class="text-xs text-reforge-muted">Design/prototyping ‚Ä¢ 15 calls</p>
                </div>
                <span class="text-2xl font-bold text-reforge-orange">40</span>
              </div>
              <div class="flex items-center justify-between bg-reforge-teal/5 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Amplitude</p>
                  <p class="text-xs text-reforge-muted">Analytics ‚Ä¢ 11 calls</p>
                </div>
                <span class="text-2xl font-bold text-reforge-teal">32</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">ProductBoard</p>
                  <p class="text-xs text-reforge-muted">Product management ‚Ä¢ 7 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">15</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Replit</p>
                  <p class="text-xs text-reforge-muted">AI prototyping ‚Ä¢ 5 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">14</span>
              </div>
            </div>
          </div>

          <!-- Research & Feedback Tools -->
          <div class="card rounded-xl p-6">
            <h3 class="font-semibold mb-4 text-gray-900 flex items-center gap-2">
              <span class="w-2 h-2 bg-reforge-teal rounded-full"></span>
              Research & Feedback Tools
            </h3>
            <div class="space-y-3">
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">UserTesting</p>
                  <p class="text-xs text-reforge-muted">User research ‚Ä¢ 7 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">10</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Pendo</p>
                  <p class="text-xs text-reforge-muted">Product analytics ‚Ä¢ 3 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">7</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Mixpanel</p>
                  <p class="text-xs text-reforge-muted">Analytics ‚Ä¢ 4 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">6</span>
              </div>
              <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
                <div>
                  <p class="font-medium text-gray-900">Dovetail</p>
                  <p class="text-xs text-reforge-muted">Research repository ‚Ä¢ 3 calls</p>
                </div>
                <span class="text-2xl font-bold text-gray-700">5</span>
              </div>
            </div>
          </div>
        </div>

        <!-- Other Tools Grid -->
        <div class="card rounded-xl p-6 mb-6">
          <h3 class="font-semibold mb-4 text-gray-900 flex items-center gap-2">
            <span class="w-2 h-2 bg-reforge-mustard rounded-full"></span>
            Other Tools Mentioned by Prospects
          </h3>
          <div class="grid grid-cols-6 gap-4">
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-700">3</span>
              <p class="text-xs text-gray-600 mt-1">Miro</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-700">2</span>
              <p class="text-xs text-gray-600 mt-1">Sprig</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-700">2</span>
              <p class="text-xs text-gray-600 mt-1">Heap</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-700">1</span>
              <p class="text-xs text-gray-600 mt-1">Hotjar</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-700">1</span>
              <p class="text-xs text-gray-600 mt-1">Maze</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3 text-center">
              <span class="text-xl font-bold text-gray-600">0</span>
              <p class="text-xs text-gray-600 mt-1">Enterpret</p>
            </div>
          </div>
          <p class="text-xs text-reforge-muted mt-4">Note: FullStory also had 0 prospect mentions. Enterpret mentions came from Jonathan pitching, not prospects.</p>
        </div>

        <!-- Key Competitive Insights -->
        <div class="card rounded-xl p-6">
          <h3 class="font-semibold mb-4 text-gray-900">Key Competitive Insights (Prospect-Only Analysis)</h3>
          <div class="space-y-3">
            <div class="bg-reforge-orange/5 border-l-4 border-reforge-orange rounded-r-lg p-4">
              <p class="font-medium text-gray-900">Figma dominates prospect mentions (40x across 15 calls)</p>
              <p class="text-sm text-reforge-muted mt-1">"We have figma tools" ‚Ä¢ "Usually we've just done like figma" ‚Ä¢ Deeply embedded in workflows</p>
            </div>
            <div class="bg-reforge-teal/5 border-l-4 border-reforge-teal rounded-r-lg p-4">
              <p class="font-medium text-gray-900">Amplitude is the #2 mentioned tool (32x across 11 calls)</p>
              <p class="text-sm text-reforge-muted mt-1">Strong analytics presence ‚Äî prospects already have data, need insights layer</p>
            </div>
            <div class="bg-reforge-mustard/5 border-l-4 border-reforge-mustard rounded-r-lg p-4">
              <p class="font-medium text-gray-900">ProductBoard pain: "They lock the data" (15 mentions)</p>
              <p class="text-sm text-reforge-muted mt-1">"Looking for maybe a different tool" ‚Ä¢ "Challenge... about exporting the data"</p>
            </div>
            <div class="bg-gray-50 border-l-4 border-gray-300 rounded-r-lg p-4">
              <p class="font-medium text-gray-900">Replit comparison is real (14 mentions)</p>
              <p class="text-sm text-reforge-muted mt-1">"We have been using replit for quick prototyping" ‚Äî direct competition for Build</p>
            </div>
            <div class="bg-gray-50 border-l-4 border-gray-300 rounded-r-lg p-4">
              <p class="font-medium text-gray-900">Dovetail frustration: "Painful to consolidate" (5 mentions)</p>
              <p class="text-sm text-reforge-muted mt-1">"Within dovetail interviews is just really painful to try to consolidate and follow the pattern"</p>
            </div>
          </div>
        </div>
      </section>
    </main>
  </div>

  <script>
    // Navigation
    function showSection(sectionId) {
      document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
      document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
      document.getElementById(sectionId).classList.remove('hidden');
      document.querySelector(`[onclick="showSection('${sectionId}')"]`).classList.add('active');
    }

    // Data
    const recentCalls = [
      { date: 'Jan 30', company: 'Console', duration: '19min' },
      { date: 'Jan 30', company: 'Evergive Ltd', duration: '8min' },
      { date: 'Jan 29', company: 'Maestro', duration: '25min' },
      { date: 'Jan 28', company: 'HubSpot Check-in', duration: '49min' },
      { date: 'Jan 26', company: 'Neo Financial', duration: '12min' },
      { date: 'Jan 26', company: 'Brigit', duration: '20min' },
      { date: 'Jan 23', company: 'Halo (Seth)', duration: '28min' },
      { date: 'Jan 22', company: 'DreamHost', duration: '27min' },
      { date: 'Jan 22', company: 'Ecovadis', duration: '30min' },
      { date: 'Jan 21', company: 'EvenUp', duration: '25min' },
      { date: 'Jan 21', company: 'Paramount', duration: '14min' },
      { date: 'Jan 21', company: 'Datadrew AI', duration: '24min' },
    ];

    const callResults = [
      // Strong fits - Ready to evaluate
      { company: 'Console', persona: 'Product Leader', scores: { problem: 9, enemy: 4, understanding: 8, nextStep: 9 }, status: 'strong', outcome: 'Trial scheduled' },
      { company: 'Maestro', persona: 'CEO + VP PM', scores: { problem: 9, enemy: 8, understanding: 9, nextStep: 9 }, status: 'strong', outcome: 'Deep demo + pilot' },
      { company: 'DreamHost', persona: 'VP Products', scores: { problem: 9, enemy: 9, understanding: 8, nextStep: 6 }, status: 'strong', outcome: 'Needs ClickUp integration' },
      { company: 'Ecovadis', persona: 'Product Leader', scores: { problem: 8, enemy: 5, understanding: 8, nextStep: 8 }, status: 'strong', outcome: 'Trial vs Replit' },
      { company: 'EvenUp', persona: 'Sr Product Analyst', scores: { problem: 9, enemy: 4, understanding: 9, nextStep: 8 }, status: 'strong', outcome: 'API integration' },
      { company: 'Halo', persona: 'VP PM', scores: { problem: 8, enemy: 4, understanding: 7, nextStep: 8 }, status: 'strong', outcome: 'CPTO champion' },
      { company: 'Neo Financial', persona: 'Product', scores: { problem: 8, enemy: 4, understanding: 8, nextStep: 7 }, status: 'strong', outcome: 'Pricing negotiation' },
      { company: 'Noom', persona: 'CSO + CX Dir', scores: { problem: 8, enemy: 4, understanding: 7, nextStep: 8 }, status: 'strong', outcome: 'Insights demo' },
      { company: 'Celigo', persona: 'Group PM', scores: { problem: 6, enemy: 3, understanding: 7, nextStep: 8 }, status: 'strong', outcome: 'Learning platform' },
      { company: 'Paramount', persona: 'Design Dir + SVP', scores: { problem: 7, enemy: 4, understanding: 7, nextStep: 7 }, status: 'strong', outcome: 'Design team eval' },
      // Moderate fits - Maybe
      { company: 'Brigit', persona: 'Designer/Researcher', scores: { problem: 7, enemy: 7, understanding: 7, nextStep: 5 }, status: 'moderate', outcome: 'New to role' },
      { company: 'Caterina', persona: 'CPO', scores: { problem: 7, enemy: 4, understanding: 7, nextStep: 5 }, status: 'moderate', outcome: 'Pre-revenue' },
      { company: 'Datadrew AI', persona: 'Co-founder', scores: { problem: 7, enemy: 4, understanding: 7, nextStep: 7 }, status: 'moderate', outcome: 'Build eval' },
      { company: 'Opus 2', persona: 'Principal PM', scores: { problem: 7, enemy: 4, understanding: 7, nextStep: 7 }, status: 'moderate', outcome: 'Insights eval' },
      { company: 'Arist', persona: 'PM', scores: { problem: 7, enemy: 4, understanding: 6, nextStep: 6 }, status: 'moderate', outcome: 'Exploratory' },
      { company: 'Keyloop', persona: 'Unknown', scores: { problem: 6, enemy: 4, understanding: 6, nextStep: 5 }, status: 'moderate', outcome: 'Short call' },
      { company: 'Yazio', persona: 'Product Ops', scores: { problem: 6, enemy: 4, understanding: 6, nextStep: 5 }, status: 'moderate', outcome: 'Exploratory' },
      // Onboarding / Active customers
      { company: 'Tie', persona: 'COO + Sr PM', scores: { problem: 7, enemy: 4, understanding: 8, nextStep: 8 }, status: 'strong', outcome: 'Onboarding' },
      { company: 'Zeffy', persona: 'Head of Product', scores: { problem: 7, enemy: 4, understanding: 8, nextStep: 8 }, status: 'strong', outcome: 'Snowflake sync' },
      { company: 'Liven/Skelar', persona: 'PM', scores: { problem: 6, enemy: 3, understanding: 7, nextStep: 7 }, status: 'moderate', outcome: 'Implementation' },
      { company: 'Assembly', persona: 'Unknown', scores: { problem: 7, enemy: 4, understanding: 7, nextStep: 7 }, status: 'moderate', outcome: 'Active eval' },
      { company: 'HubSpot (Hunt)', persona: 'Consultant', scores: { problem: 6, enemy: 3, understanding: 7, nextStep: 7 }, status: 'moderate', outcome: 'Check-in' },
      { company: 'Evergive', persona: 'Unknown', scores: { problem: 5, enemy: 3, understanding: 5, nextStep: 5 }, status: 'moderate', outcome: 'Short intro' },
      { company: 'Skelar', persona: 'PM', scores: { problem: 6, enemy: 3, understanding: 6, nextStep: 5 }, status: 'moderate', outcome: 'Strategy call' },
    ];

    const pipeline = [
      { account: 'Neo Financial', product: 'IA + Research', size: 60000, status: 'Pricing sent', lastActivity: 'Jan 28', urgent: false },
      { account: 'EvenUp', product: 'IA', size: 50000, status: 'Pilot stalled', lastActivity: 'Jan 21', urgent: true },
      { account: 'E&Y', product: 'IA + Research', size: 30000, status: 'Discovery', lastActivity: 'Jan 25', urgent: false },
      { account: 'Fox Local', product: 'IA + Research + Build', size: 27000, status: 'Budget approval', lastActivity: 'Jan 20', urgent: false },
      { account: 'DreamHost', product: 'IA', size: 25000, status: 'In pilot', lastActivity: 'Jan 22', urgent: false },
      { account: 'Ecovadis', product: 'Build + IA', size: 18000, status: 'Starting pilot', lastActivity: 'Jan 22', urgent: false },
    ];

    const staleOpps = [
      { company: 'Liven', lastCall: 'Jan 7', days: 27 },
      { company: 'Opus 2', lastCall: 'Jan 9', days: 25 },
      { company: 'Tie', lastCall: 'Jan 13', days: 21 },
      { company: 'Caterina', lastCall: 'Jan 14', days: 20 },
    ];

    function populateUI() {
      document.getElementById('recentCalls').innerHTML = recentCalls.map(c => `
        <div class="flex items-center justify-between bg-gray-50 rounded-lg p-3">
          <div>
            <p class="font-medium text-sm text-gray-900">${c.company}</p>
            <p class="text-xs text-reforge-muted">${c.date} ‚Ä¢ ${c.duration}</p>
          </div>
          <a href="#" class="text-reforge-orange text-sm font-medium">View ‚Üí</a>
        </div>
      `).join('');

      document.getElementById('callResults').innerHTML = callResults.map(c => `
        <div class="flex items-center justify-between bg-gray-50 rounded-lg p-4">
          <div class="flex items-center gap-4">
            <div>
              <p class="font-medium text-gray-900">${c.company}</p>
              <p class="text-xs text-reforge-muted">${c.persona}</p>
            </div>
          </div>
          <div class="flex items-center gap-6">
            <div class="flex gap-2 text-xs">
              <span class="px-2 py-1 rounded ${c.scores.problem >= 8 ? 'bg-reforge-teal/20 text-reforge-teal' : 'bg-gray-100 text-gray-600'}">P:${c.scores.problem}</span>
              <span class="px-2 py-1 rounded ${c.scores.enemy >= 6 ? 'bg-reforge-teal/20 text-reforge-teal' : 'bg-reforge-mustard/20 text-reforge-mustard'}">E:${c.scores.enemy}</span>
              <span class="px-2 py-1 rounded ${c.scores.nextStep >= 7 ? 'bg-reforge-teal/20 text-reforge-teal' : 'bg-gray-100 text-gray-600'}">NS:${c.scores.nextStep}</span>
            </div>
            <span class="px-2 py-1 rounded-full text-xs font-medium ${c.status === 'strong' ? 'bg-reforge-teal/20 text-reforge-teal' : 'bg-reforge-mustard/20 text-reforge-mustard'}">${c.outcome}</span>
          </div>
        </div>
      `).join('');

      document.getElementById('opportunitiesTable').innerHTML = pipeline.map(p => `
        <tr class="border-b border-gray-100 ${p.urgent ? 'bg-reforge-orange/5' : ''}">
          <td class="py-3 font-medium text-gray-900">${p.account}</td>
          <td class="py-3 text-gray-600">${p.product}</td>
          <td class="py-3 text-right text-gray-900">$${(p.size/1000).toFixed(0)}K</td>
          <td class="py-3">
            <span class="px-2 py-1 ${p.urgent ? 'bg-reforge-orange/20 text-reforge-orange' : 'bg-reforge-teal/20 text-reforge-teal'} text-xs rounded-full font-medium">${p.status}</span>
          </td>
          <td class="py-3 text-gray-600">${p.lastActivity}</td>
          <td class="py-3 text-right">
            <button class="text-reforge-orange hover:underline text-sm font-medium">Decide ‚Üí</button>
          </td>
        </tr>
      `).join('');

      document.getElementById('staleOpps').innerHTML = staleOpps.map(o => `
        <div class="flex items-center justify-between bg-reforge-mustard/10 rounded-lg p-3">
          <div>
            <p class="font-medium text-sm text-gray-900">${o.company}</p>
            <p class="text-xs text-reforge-muted">Last call: ${o.lastCall} (${o.days} days ago)</p>
          </div>
          <button class="text-reforge-mustard text-sm font-medium">Follow up ‚Üí</button>
        </div>
      `).join('');
    }

    function researchCompany() {
      const website = document.getElementById('deckWebsite').value;
      const linkedin = document.getElementById('deckLinkedIn').value;
      if (!website && !linkedin) { alert('Please enter a website or LinkedIn URL'); return; }
      
      document.getElementById('researchResult').classList.remove('hidden');
      document.getElementById('researchContent').innerHTML = `
        <div class="flex items-center gap-3 py-4">
          <div class="animate-spin w-5 h-5 border-2 border-reforge-teal border-t-transparent rounded-full"></div>
          <p class="text-gray-700">Scraping ${website || linkedin} for company context...</p>
        </div>
      `;
      
      // Simulate research (in production, this would call an API)
      setTimeout(() => {
        document.getElementById('researchContent').innerHTML = `
          <div class="grid grid-cols-2 gap-4 mb-4">
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted">Company</p>
              <p class="font-medium text-gray-900">${document.getElementById('deckCompany').value || 'Acme Corp'}</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted">Industry</p>
              <p class="font-medium text-gray-900">B2B SaaS</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted">Tech Stack Signals</p>
              <p class="font-medium text-gray-900">React, Node.js, AWS</p>
            </div>
            <div class="bg-gray-50 rounded-lg p-3">
              <p class="text-xs text-reforge-muted">AI Adoption Signals</p>
              <p class="font-medium text-reforge-teal">‚úì GitHub Copilot mentioned in jobs</p>
            </div>
          </div>
          <div class="bg-reforge-teal/10 rounded-lg p-3">
            <p class="text-sm text-reforge-teal font-medium">üí° Research complete - context added to deck generation</p>
          </div>
        `;
      }, 2000);
    }

    function generateDeck() {
      const company = document.getElementById('deckCompany').value;
      if (!company) { alert('Please enter a company name'); return; }
      document.getElementById('deckResult').classList.remove('hidden');
      document.getElementById('deckPreview').innerHTML = `
        <div class="text-center py-8">
          <div class="animate-spin w-8 h-8 border-2 border-reforge-orange border-t-transparent rounded-full mx-auto mb-4"></div>
          <p class="text-gray-700">Generating custom deck for ${company}...</p>
        </div>
      `;
      setTimeout(() => {
        const persona = document.getElementById('deckPersona').value;
        const pain = document.getElementById('deckPain').value;
        document.getElementById('deckPreview').innerHTML = `
          <div class="space-y-4">
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <p class="text-reforge-orange font-semibold mb-2">Slide 1: The ${company} Problem</p>
              <p class="text-sm text-gray-600">Customized opening based on their specific pain point...</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <p class="text-reforge-orange font-semibold mb-2">Slide 2: Product Debt is Killing You</p>
              <p class="text-sm text-gray-600">Every feature you ship without validation becomes debt...</p>
            </div>
            <div class="bg-white rounded-lg p-4 border border-gray-200">
              <p class="text-reforge-orange font-semibold mb-2">Slide 3: The Discovery Deficit</p>
              <p class="text-sm text-gray-600">AI accelerated engineering. Discovery didn't keep up.</p>
            </div>
            <p class="text-center text-gray-500 text-sm">+ 7 more slides customized for ${company} (${persona})</p>
          </div>
        `;
      }, 2500);
    }

    // ========== LEAD ENRICHMENT (APOLLO API) ==========
    const SUPABASE_URL = "https://rtduqguwhkczexnoawej.supabase.co";
    const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJ0ZHVxZ3V3aGtjemV4bm9hd2VqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE2Njg1ODAsImV4cCI6MjA2NzI0NDU4MH0.1QZ5ofS-ND_OI71igPlxxMTyZJJRlATSSC0djccWR8o";
    const ENRICH_API_URL = `${SUPABASE_URL}/functions/v1/lead-enrich`;
    let lastEnrichedData = null;

    async function qualifyLead() {
      const domain = document.getElementById('enrichDomain').value.trim();
      const linkedinUrl = document.getElementById('enrichLinkedIn').value.trim();
      const companyName = document.getElementById('enrichCompanyName').value.trim();

      if (!domain && !linkedinUrl && !companyName) {
        alert('Please enter a company website, LinkedIn URL, or company name');
        return;
      }

      // Show loading state
      const btn = document.getElementById('enrichBtn');
      const btnIcon = document.getElementById('enrichBtnIcon');
      const btnText = document.getElementById('enrichBtnText');
      btn.disabled = true;
      btnIcon.innerHTML = '<div class="animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"></div>';
      btnText.textContent = 'Enriching...';
      
      document.getElementById('enrichResult').classList.add('hidden');
      document.getElementById('enrichError').classList.add('hidden');

      try {
        const response = await fetch(ENRICH_API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${SUPABASE_ANON_KEY}`,
            'apikey': SUPABASE_ANON_KEY,
          },
          body: JSON.stringify({
            domain: domain || undefined,
            linkedin_url: linkedinUrl || undefined,
            company_name: companyName || undefined,
          }),
        });

        const data = await response.json();

        if (!data.success) {
          throw new Error(data.error || 'Unknown error');
        }

        // Store for later use
        lastEnrichedData = data;

        // Display results
        displayEnrichmentResult(data);
        
      } catch (error) {
        console.error('Enrichment error:', error);
        document.getElementById('enrichError').classList.remove('hidden');
        document.getElementById('enrichErrorMessage').textContent = error.message || 'Failed to enrich lead. Check the console for details.';
      } finally {
        btn.disabled = false;
        btnIcon.textContent = 'üéØ';
        btnText.textContent = 'Qualify Lead';
      }
    }

    function displayEnrichmentResult(data) {
      const company = data.company;
      const score = data.icp_score;

      // Show result card
      document.getElementById('enrichResult').classList.remove('hidden');

      // Basic info
      document.getElementById('enrichCompanyTitle').textContent = company.name || 'Unknown';
      document.getElementById('enrichIndustry').textContent = company.industry || 'Unknown industry';
      
      if (company.logo_url) {
        document.getElementById('enrichLogo').src = company.logo_url;
        document.getElementById('enrichLogo').style.display = 'block';
      } else {
        document.getElementById('enrichLogo').style.display = 'none';
      }

      if (company.domain) {
        document.getElementById('enrichWebsite').href = `https://${company.domain}`;
        document.getElementById('enrichWebsite').textContent = company.domain;
      }

      // Score ring
      const scoreRing = document.getElementById('enrichScoreRing');
      const scoreColor = score.total >= 85 ? '#57A499' : score.total >= 70 ? '#CEAA56' : '#ED5624';
      scoreRing.style.setProperty('--score', score.total);
      scoreRing.style.setProperty('--score-color', scoreColor);
      document.getElementById('enrichScoreValue').textContent = score.total;
      document.getElementById('enrichScoreValue').style.color = scoreColor;
      document.getElementById('enrichRecommendation').textContent = score.recommendation;
      document.getElementById('enrichRecommendation').style.color = scoreColor;

      // Details
      document.getElementById('enrichEmployees').textContent = company.employee_count ? 
        `${company.employee_count.toLocaleString()}${company.employee_range ? ` (${company.employee_range})` : ''}` : '‚Äî';
      document.getElementById('enrichFounded').textContent = company.founded_year || '‚Äî';
      document.getElementById('enrichFunding').textContent = company.funding_stage || '‚Äî';
      
      const location = [company.location?.city, company.location?.state, company.location?.country].filter(Boolean).join(', ');
      document.getElementById('enrichLocation').textContent = location || '‚Äî';

      document.getElementById('enrichDescription').textContent = company.short_description || company.seo_description || 'No description available';

      // Tech stack
      const techContainer = document.getElementById('enrichTechStack');
      if (company.technologies && company.technologies.length > 0) {
        techContainer.innerHTML = company.technologies.slice(0, 12).map(tech => {
          const isAI = ['openai', 'copilot', 'gpt', 'ai', 'ml', 'anthropic', 'claude', 'cursor'].some(ai => 
            tech.toLowerCase().includes(ai)
          );
          return `<span class="px-2 py-1 ${isAI ? 'bg-reforge-teal/20 text-reforge-teal' : 'bg-gray-100 text-gray-700'} text-xs rounded-full">${tech}</span>`;
        }).join('');
        if (company.technologies.length > 12) {
          techContainer.innerHTML += `<span class="px-2 py-1 bg-gray-100 text-gray-500 text-xs rounded-full">+${company.technologies.length - 12} more</span>`;
        }
      } else {
        techContainer.innerHTML = '<span class="text-xs text-reforge-muted">No tech stack data available</span>';
      }

      // Score breakdown
      const breakdownContainer = document.getElementById('enrichScoreBreakdown');
      breakdownContainer.innerHTML = score.breakdown.map(item => {
        const isPositive = item.points > 0;
        return `
          <div class="flex items-center justify-between bg-gray-50 rounded-lg p-2">
            <div class="flex items-center gap-2">
              <span class="${isPositive ? 'text-reforge-teal' : 'text-reforge-orange'}">${isPositive ? '‚úì' : '‚úó'}</span>
              <span class="text-sm font-medium text-gray-900">${item.factor}</span>
            </div>
            <div class="flex items-center gap-3">
              <span class="text-xs text-reforge-muted">${item.reason}</span>
              <span class="text-sm font-bold ${isPositive ? 'text-reforge-teal' : 'text-reforge-orange'}">${isPositive ? '+' : ''}${item.points}</span>
            </div>
          </div>
        `;
      }).join('');

      // Update the border color based on score
      const resultCard = document.getElementById('enrichResult');
      resultCard.className = `card rounded-xl p-6 mb-6 border-l-4 ${
        score.total >= 85 ? 'border-reforge-teal' : 
        score.total >= 70 ? 'border-reforge-mustard' : 'border-reforge-orange'
      }`;
    }

    function addEnrichedToSwiper() {
      if (!lastEnrichedData) {
        alert('No enriched data available');
        return;
      }

      const company = lastEnrichedData.company;
      const score = lastEnrichedData.icp_score;

      // Create a new lead object
      const newLead = {
        id: Date.now(),
        company: company.name,
        person: "Contact TBD",
        title: "‚Äî",
        size: company.employee_range || `${company.employee_count || 'Unknown'}`,
        industry: company.industry || "Unknown",
        ai_signals: company.technologies?.filter(t => 
          ['openai', 'copilot', 'gpt', 'ai', 'ml', 'anthropic', 'claude', 'cursor'].some(ai => 
            t.toLowerCase().includes(ai)
          )
        ) || [],
        icp_score: score.total,
        summary: score.recommendation,
        enriched: true,
        domain: company.domain,
        linkedin_url: company.linkedin_url,
        funding_stage: company.funding_stage,
        total_funding: company.total_funding,
        logo_url: company.logo_url,
      };

      // Add to the beginning of the leads array
      leads.unshift(newLead);
      
      // Reset to show the new card
      currentIndex = 0;
      renderCards();

      // Clear the form
      document.getElementById('enrichDomain').value = '';
      document.getElementById('enrichLinkedIn').value = '';
      document.getElementById('enrichCompanyName').value = '';
      document.getElementById('enrichResult').classList.add('hidden');
      lastEnrichedData = null;

      // Show confirmation
      alert(`Added ${company.name} to swiper queue!`);
    }

    function copyEnrichedData() {
      if (!lastEnrichedData) {
        alert('No enriched data available');
        return;
      }

      const company = lastEnrichedData.company;
      const score = lastEnrichedData.icp_score;

      const text = `
Company: ${company.name}
Domain: ${company.domain || 'N/A'}
Industry: ${company.industry || 'N/A'}
Employees: ${company.employee_count || 'N/A'}
Founded: ${company.founded_year || 'N/A'}
Funding: ${company.funding_stage || 'N/A'}
Location: ${[company.location?.city, company.location?.state, company.location?.country].filter(Boolean).join(', ') || 'N/A'}

Description: ${company.short_description || 'N/A'}

Tech Stack: ${company.technologies?.slice(0, 10).join(', ') || 'N/A'}

ICP Score: ${score.total}/100
Recommendation: ${score.recommendation}

Score Breakdown:
${score.breakdown.map(b => `  ${b.points > 0 ? '+' : ''}${b.points} ${b.factor}: ${b.reason}`).join('\n')}
      `.trim();

      navigator.clipboard.writeText(text).then(() => {
        alert('Data copied to clipboard!');
      }).catch(err => {
        console.error('Copy failed:', err);
        // Fallback
        const textarea = document.createElement('textarea');
        textarea.value = text;
        document.body.appendChild(textarea);
        textarea.select();
        document.execCommand('copy');
        document.body.removeChild(textarea);
        alert('Data copied to clipboard!');
      });
    }

    // ========== LEAD QUALIFIER SWIPER ==========
    let sampleLeads = [];
    
    // Load leads from JSON file
    fetch('data/swiper_leads.json')
      .then(r => r.json())
      .then(data => {
        sampleLeads = data;
        leads = [...sampleLeads];
        renderCards();
        updateQueueBadge();
      })
      .catch(e => {
        console.error('Failed to load leads:', e);
        // Fallback to empty
        sampleLeads = [];
        leads = [];
      })

    let leads = [...sampleLeads];
    let currentIndex = 0;
    let qualifiedLeads = [];
    let skippedLeads = [];
    let isDragging = false;
    let startX = 0;
    let currentX = 0;

    function getScoreColor(score) {
      if (score >= 85) return '#57A499';
      if (score >= 70) return '#CEAA56';
      return '#ED5624';
    }

    function renderCard(lead, index) {
      const scoreColor = getScoreColor(lead.icp_score);
      const signals = lead.signals || [];
      const companyDomain = lead.website || (lead.company ? lead.company.toLowerCase().replace(/[^a-z0-9]/g, '') + '.com' : '');
      return `
        <div class="swipe-card card-stack-item p-6" data-index="${index}" style="--score: ${lead.icp_score}; --score-color: ${scoreColor}">
          <div class="swipe-overlay nope">SKIP</div>
          <div class="swipe-overlay like">QUALIFY</div>
          
          <div class="flex items-start justify-between mb-4">
            <div>
              <div class="flex items-center gap-2">
                <h3 class="text-xl font-bold text-gray-900">${lead.company}</h3>
                <a href="https://${companyDomain}" target="_blank" class="text-reforge-muted hover:text-reforge-teal" title="Visit website">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                </a>
              </div>
              <p class="text-reforge-muted text-sm">${lead.industry || 'Technology'}</p>
            </div>
            <div class="icp-score-ring">
              <div class="icp-score-ring-inner" style="color: ${scoreColor}">${lead.icp_score}</div>
            </div>
          </div>
          
          <div class="bg-gray-50 rounded-lg p-4 mb-4">
            <div class="flex items-center gap-3 mb-3">
              <div class="w-10 h-10 rounded-full bg-reforge-teal/20 flex items-center justify-center text-lg font-medium">
                ${(lead.person || 'U').charAt(0)}
              </div>
              <div>
                <div class="flex items-center gap-2">
                  <p class="font-semibold text-gray-900">${lead.person || 'Unknown'}</p>
                  ${lead.linkedin ? `<a href="${lead.linkedin}" target="_blank" class="text-reforge-teal hover:text-reforge-teal/70"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg></a>` : ''}
                </div>
                <p class="text-sm text-reforge-muted">${lead.title || 'Product Leader'}</p>
              </div>
            </div>
            <div class="text-sm">
              <p class="text-reforge-muted text-xs mb-2">Signals</p>
              <div class="space-y-1">
                ${signals.slice(0, 4).map(s => `<p class="text-gray-900">${s}</p>`).join('')}
              </div>
            </div>
          </div>
          
          <!-- Action buttons integrated into card -->
          <div class="flex items-center justify-center gap-4 pt-2 border-t border-gray-100">
            <button onclick="event.stopPropagation(); swipeLeft()" class="flex-1 py-3 px-4 rounded-lg border-2 border-reforge-orange text-reforge-orange font-medium hover:bg-reforge-orange/10 transition-all flex items-center justify-center gap-2">
              <span class="text-xl">‚úó</span> Skip
            </button>
            <button onclick="event.stopPropagation(); swipeRight()" class="flex-1 py-3 px-4 rounded-lg bg-reforge-teal text-white font-medium hover:bg-reforge-teal/90 transition-all flex items-center justify-center gap-2">
              <span class="text-xl">‚úì</span> Qualify
            </button>
          </div>
        </div>
      `;
    }

    function renderCards() {
      const stack = document.getElementById('cardStack');
      const remaining = leads.slice(currentIndex, currentIndex + 3);
      
      if (remaining.length === 0) {
        stack.innerHTML = '';
        document.getElementById('emptyState').classList.remove('hidden');
        return;
      }
      
      document.getElementById('emptyState').classList.add('hidden');
      stack.innerHTML = remaining.map((lead, i) => renderCard(lead, currentIndex + i)).join('');
      
      // Add drag handlers to top card
      const topCard = stack.querySelector('.swipe-card');
      if (topCard) {
        topCard.addEventListener('mousedown', startDrag);
        topCard.addEventListener('touchstart', startDrag, { passive: true });
      }
      
      updateStats();
    }

    function startDrag(e) {
      isDragging = true;
      startX = e.type === 'touchstart' ? e.touches[0].clientX : e.clientX;
      const card = e.currentTarget;
      card.classList.add('swiping');
      
      document.addEventListener('mousemove', onDrag);
      document.addEventListener('mouseup', endDrag);
      document.addEventListener('touchmove', onDrag, { passive: true });
      document.addEventListener('touchend', endDrag);
    }

    function onDrag(e) {
      if (!isDragging) return;
      currentX = (e.type === 'touchmove' ? e.touches[0].clientX : e.clientX) - startX;
      
      const card = document.querySelector('.swipe-card.swiping');
      if (!card) return;
      
      // Show SKIP/QUALIFY overlays based on drag direction
      card.classList.remove('dragging-left', 'dragging-right');
      if (currentX < -30) {
        card.classList.add('dragging-left');
      } else if (currentX > 30) {
        card.classList.add('dragging-right');
      }
      
      const rotation = currentX * 0.05;
      card.style.transform = `translateX(${currentX}px) rotate(${rotation}deg)`;
      
      // Update overlays
      const nopeOverlay = card.querySelector('.swipe-overlay.nope');
      const likeOverlay = card.querySelector('.swipe-overlay.like');
      
      if (currentX < -50) {
        nopeOverlay.style.opacity = Math.min(1, Math.abs(currentX) / 150);
        likeOverlay.style.opacity = 0;
        document.getElementById('swipeLeftIndicator').style.opacity = Math.min(1, Math.abs(currentX) / 150);
        document.getElementById('swipeRightIndicator').style.opacity = 0;
      } else if (currentX > 50) {
        likeOverlay.style.opacity = Math.min(1, currentX / 150);
        nopeOverlay.style.opacity = 0;
        document.getElementById('swipeRightIndicator').style.opacity = Math.min(1, currentX / 150);
        document.getElementById('swipeLeftIndicator').style.opacity = 0;
      } else {
        nopeOverlay.style.opacity = 0;
        likeOverlay.style.opacity = 0;
        document.getElementById('swipeLeftIndicator').style.opacity = 0;
        document.getElementById('swipeRightIndicator').style.opacity = 0;
      }
    }

    function endDrag() {
      if (!isDragging) return;
      isDragging = false;
      
      document.removeEventListener('mousemove', onDrag);
      document.removeEventListener('mouseup', endDrag);
      document.removeEventListener('touchmove', onDrag);
      document.removeEventListener('touchend', endDrag);
      
      const card = document.querySelector('.swipe-card.swiping');
      if (!card) return;
      
      card.classList.remove('swiping');
      document.getElementById('swipeLeftIndicator').style.opacity = 0;
      document.getElementById('swipeRightIndicator').style.opacity = 0;
      
      // Clean up drag classes
      card.classList.remove('dragging-left', 'dragging-right');
      
      if (currentX < -100) {
        swipeLeft();
      } else if (currentX > 100) {
        swipeRight();
      } else {
        card.style.transform = '';
        card.querySelector('.swipe-overlay.nope').style.opacity = 0;
        card.querySelector('.swipe-overlay.like').style.opacity = 0;
      }
      
      currentX = 0;
    }

    function swipeLeft() {
      const card = document.querySelector('.swipe-card:first-child');
      if (!card || currentIndex >= leads.length) return;
      
      card.classList.add('animate-left');
      skippedLeads.push(leads[currentIndex]);
      
      setTimeout(() => {
        currentIndex++;
        renderCards();
      }, 350);
    }

    function swipeRight() {
      const card = document.querySelector('.swipe-card:first-child');
      if (!card || currentIndex >= leads.length) return;
      
      card.classList.add('animate-right');
      const lead = leads[currentIndex];
      qualifiedLeads.push(lead);
      
      // Add to LinkedIn connection queue in localStorage
      const queue = JSON.parse(localStorage.getItem('linkedinQueue') || '[]');
      queue.push({
        ...lead,
        queuedAt: new Date().toISOString(),
        status: 'pending'
      });
      localStorage.setItem('linkedinQueue', JSON.stringify(queue));
      
      updateRecentQualified();
      updateQueueBadge();
      
      setTimeout(() => {
        currentIndex++;
        renderCards();
      }, 350);
    }
    
    function updateQueueBadge() {
      const queue = JSON.parse(localStorage.getItem('linkedinQueue') || '[]');
      const pending = queue.filter(l => l.status === 'pending').length;
      const badge = document.getElementById('queueBadge');
      if (badge) {
        badge.textContent = pending;
        badge.style.display = pending > 0 ? 'flex' : 'none';
      }
    }
    
    function exportQueue() {
      const queue = JSON.parse(localStorage.getItem('linkedinQueue') || '[]');
      const blob = new Blob([JSON.stringify(queue, null, 2)], {type: 'application/json'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = 'linkedin_queue_' + new Date().toISOString().split('T')[0] + '.json';
      a.click();
    }
    
    function clearQueue() {
      if (confirm('Clear all queued LinkedIn connections?')) {
        localStorage.setItem('linkedinQueue', '[]');
        updateQueueBadge();
      }
    }

    function updateStats() {
      const reviewed = qualifiedLeads.length + skippedLeads.length;
      document.getElementById('qualifiedCount').textContent = qualifiedLeads.length;
      document.getElementById('reviewedCount').textContent = reviewed;
      document.getElementById('remainingCount').textContent = leads.length - currentIndex;
      document.getElementById('totalLeads').textContent = leads.length;
      
      if (reviewed > 0) {
        const rate = Math.round((qualifiedLeads.length / reviewed) * 100);
        document.getElementById('qualifyRate').textContent = rate + '%';
        
        if (qualifiedLeads.length > 0) {
          const avgScore = Math.round(qualifiedLeads.reduce((a, b) => a + b.icp_score, 0) / qualifiedLeads.length);
          document.getElementById('avgScore').textContent = avgScore;
        }
      }
    }

    function updateRecentQualified() {
      const container = document.getElementById('recentQualified');
      const recent = qualifiedLeads.slice(-5).reverse();
      
      if (recent.length === 0) {
        container.innerHTML = '<p class="text-xs text-reforge-muted italic">None yet‚Äîstart swiping!</p>';
        return;
      }
      
      container.innerHTML = recent.map(lead => `
        <div class="flex items-center justify-between bg-reforge-teal/10 rounded-lg p-2">
          <div>
            <p class="font-medium text-xs text-gray-900">${lead.company}</p>
            <p class="text-xs text-reforge-muted">${lead.person}</p>
          </div>
          <span class="text-xs font-bold text-reforge-teal">${lead.icp_score}</span>
        </div>
      `).join('');
    }

    function exportQualifiedLeads() {
      if (qualifiedLeads.length === 0) {
        alert('No qualified leads to export yet!');
        return;
      }
      
      const headers = ['Company', 'Person', 'Title', 'Size', 'Industry', 'AI Signals', 'ICP Score', 'Summary'];
      const rows = qualifiedLeads.map(l => [
        l.company, l.person, l.title, l.size, l.industry, 
        l.ai_signals.join('; '), l.icp_score, l.summary
      ]);
      
      const csv = [headers, ...rows].map(r => r.map(c => `"${c}"`).join(',')).join('\n');
      const blob = new Blob([csv], { type: 'text/csv' });
      const url = URL.createObjectURL(blob);
      
      const a = document.createElement('a');
      a.href = url;
      a.download = `qualified_leads_${new Date().toISOString().split('T')[0]}.csv`;
      a.click();
      URL.revokeObjectURL(url);
    }

    function resetSwiper() {
      currentIndex = 0;
      qualifiedLeads = [];
      skippedLeads = [];
      renderCards();
      updateRecentQualified();
    }

    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      // Only respond when lead-qualifier section is visible
      if (document.getElementById('signals').classList.contains('hidden')) return;
      
      if (e.key === 'ArrowLeft' || e.key === 'a' || e.key === 'A') {
        swipeLeft();
      } else if (e.key === 'ArrowRight' || e.key === 'd' || e.key === 'D') {
        swipeRight();
      }
    });

    // Initialize swiper when section is shown
    const originalShowSection = showSection;
    showSection = function(sectionId) {
      originalShowSection(sectionId);
      if (sectionId === 'signals') {
        renderCards();
      }
    };

    populateUI();
    
    // Handle URL hash navigation
    function handleHash() {
      const hash = window.location.hash.replace('#', '');
      if (hash && document.getElementById(hash)) {
        showSection(hash);
      }
    }
    
    // Run on load and hash change
    handleHash();
    window.addEventListener('hashchange', handleHash);
  </script>
</body>
</html>
